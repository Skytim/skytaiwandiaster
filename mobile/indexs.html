<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, user-scalable=no">
  <link href="http://jqmdesigner.appspot.com/gk/lib/jquery.mobile/1.4.5/flatui/jquery.mobile.flatui.css" rel="stylesheet" type="text/css" />
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>
    $(document).on("mobileinit", function () {
      $.mobile.autoInitializePage = false;
      $.mobile.hashListeningEnabled = false;
    });

    function mobileInitPage() {
      $.mobile.hashListeningEnabled = true;
      $.mobile.initializePage();
    };
  </script>
  <script src="http://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.js"></script>
  <!-- Uncomment the following to include cordova in your android project -->
  <!--<script src="http://jqmdesigner.appspot.com/platforms/android/cordova.js"></script>-->
  <!-- GK Loader use RequireJS to load module -->
  <script src="http://requirejs.org/docs/release/2.1.11/minified/require.js"></script>
  <!--Plug in GK-->
  <!-- Include Google Maps API (Google Maps API v3 已不需使用 API Key) -->
  <script src="http://maps.google.com/maps/api/js?sensor=false"></script>
  <script src="http://app.essoduke.org/tinyMap/jquery.tinyMap-2.8.1.min.js"></script>
  <script src="http://jqmdesigner.appspot.com/components/jquery.gk/jquery.gk.min.js"></script>
  <!-- Load GK components -->
  <script components="http://jqmdesigner.appspot.com/components/gk-ext/gk-position.html" callback="mobileInitPage" src="http://jqmdesigner.appspot.com/components/gk-loader/gk-loader.js"></script>
  <!-- Export JS  -->
  <script>
    /*** code gen by gk-position  ***/ ;
    $(document).on("gkComponentsReady", function () {
      var map = $('#map');
      map.tinyMap();
      function onSuccess(position) {
        var latitude = position.coords.latitude;
        var longitude = position.coords.longitude;
        $("#gk-1013XzQG").html("Latitude: " + latitude + "<br /> Longitude: " + longitude);
      }

      function onError(error) {
        // onError Callback receives a PositionError object  
      }
      if (navigator.geolocation) {
        var watchID = navigator.geolocation.watchPosition(onSuccess, onError, {
          timeout: 10000
        });
      }

      $("#refugeplace")
        .change(function () {
          var str = "";
          $("select option:selected").each(function () {
            str += $(this).text() + " ";
          });
          alert(str);
        })
        .change();



    });
  </script>
  <title>EZo App</title>
</head>

<body gk-app>
  <!-- Page: home  -->
  <div id="home" data-role="page">
    <div data-role="header" data-position="fixed" data-theme="b">
      <h3>Slide Panel</h3>
      <a class="ui-btn ui-btn-left ui-btn-icon-left ui-icon-arrow-r" href="#left-menu" style="padding:18px; background:none;"></a>
    </div>
    <div id="left-menu" data-role="panel" data-position="left" data-position-fixed="true" data-theme="b">
      <div class="ui-field-contain">
        <select id="refugeplace">
          <option value="option1">宜蘭市</option>
          <option value="option1">高雄市</option>
          <option value="option1">新竹市</option>
        </select>
      </div>
    </div>
    <div role="main" class="ui-content">
      <div id="gk-1013XzQG" is="gk-position">Position</div>
      <div id="map"style="width:100%;height:400px"></div>
    </div>
    <div data-role="footer" data-position="fixed">
      <h3>Footer</h3>
    </div>
  </div>
</body>

</html>
